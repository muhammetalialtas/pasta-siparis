<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Pasta SipariÅŸ Formu</title>
<style>
  body{font-family:system-ui,Segoe UI,Arial;background:#fff0f5;margin:0;padding:24px;color:#4b2e2e}
  h1{text-align:center;color:#d94f70}
  form{max-width:860px;margin:auto;background:#fff;padding:24px;border-radius:16px;box-shadow:0 6px 18px rgba(0,0,0,.08)}
  label{display:block;margin-top:16px;font-weight:600}
  input,textarea{width:100%;padding:10px;margin-top:6px;border:1px solid #ddd;border-radius:10px;background:#fffafc}
  .radio-group,.checkbox-group{display:flex;flex-wrap:wrap;gap:10px;margin-top:8px}
  .radio-group label,.checkbox-group label{background:#ffe0ec;padding:10px 12px;border-radius:10px;cursor:pointer}
  .image-upload{margin-top:14px;background:#fff5f8;padding:12px;border:1px dashed #d48ca6;border-radius:12px}
  button{margin-top:18px;background:#ff6f91;border:none;color:#fff;padding:12px 22px;border-radius:24px;cursor:pointer}
  #popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#e8f5e9;color:#2e7d32;padding:24px;border-radius:16px;box-shadow:0 8px 24px rgba(0,0,0,.2);display:none;z-index:1000;text-align:center;max-width:92%}
  #popup strong{display:block;font-size:1.4em;margin-bottom:8px}
  #close{margin-top:10px;background:#c8e6c9;border:none;padding:8px 14px;border-radius:10px;cursor:pointer}
</style>
</head>
<body>
<h1>ğŸ‚ Pasta SipariÅŸ Formu</h1>

<form id="form" enctype="multipart/form-data">
  <label>AdÄ± SoyadÄ±</label>
  <input type="text" name="adsoyad" id="adsoyad" required pattern="[A-Za-zÃ‡Ã§ÄÄŸÄ°Ä±Ã–Ã¶ÅÅŸÃœÃ¼\\s]+" title="LÃ¼tfen sadece harf giriniz.">

  <label>Cep Telefon NumarasÄ±</label>
  <input type="tel" name="telefon" id="telefon" required pattern="[0-9]{10,11}" title="LÃ¼tfen geÃ§erli bir telefon numarasÄ± giriniz.">

  <label>KaÃ§ KiÅŸilik Pasta</label>
  <div class="radio-group">
    <label><input type="radio" name="kisi" value="0 nolu yuvarlak (4-5 kiÅŸilik)">0 nolu yuvarlak (4-5 kiÅŸilik)</label>
    <label><input type="radio" name="kisi" value="1 nolu yuvarlak (6-8 kiÅŸilik)">1 nolu yuvarlak (6-8 kiÅŸilik)</label>
    <label><input type="radio" name="kisi" value="2 nolu yuvarlak (9-12 kiÅŸilik)">2 nolu yuvarlak (9-12 kiÅŸilik)</label>
    <label><input type="radio" name="kisi" value="3 nolu yuvarlak (13-18 kiÅŸilik)">3 nolu yuvarlak (13-18 kiÅŸilik)</label>
    <label><input type="radio" name="kisi" value="4 nolu yuvarlak (19-23 kiÅŸilik)">4 nolu yuvarlak (19-23 kiÅŸilik)</label>
    <label><input type="radio" name="kisi" value="YarÄ±m tepsi dikdÃ¶rtgen (24-35 kiÅŸilik)">YarÄ±m tepsi dikdÃ¶rtgen (24-35 kiÅŸilik)</label>
    <label><input type="radio" name="kisi" value="Tam tepsi dikdÃ¶rtgen (36-46 kiÅŸilik)">Tam tepsi dikdÃ¶rtgen (36-46 kiÅŸilik)</label>
  </div>

  <label>PastanÄ±n Ä°Ã§i</label>
  <div class="checkbox-group">
    <label><input type="checkbox" name="ici" value="Ã‡ikolata">Ã‡ikolata</label>
    <label><input type="checkbox" name="ici" value="Ã‡ilek">Ã‡ilek</label>
    <label><input type="checkbox" name="ici" value="Muz">Muz</label>
    <label><input type="checkbox" name="ici" value="Orman Meyveleri">Orman Meyveleri</label>
  </div>

  <label>HazÄ±rlanacaÄŸÄ± GÃ¼n</label>
  <input type="date" name="tarih" required>

  <label>HazÄ±rlanacaÄŸÄ± Saat</label>
  <input type="time" name="saat" required>

  <div class="image-upload">
    <label>1. GÃ¶rsel</label>
    <input type="file" name="resim1" accept="image/*">
    <textarea name="aciklama1" placeholder="Bu gÃ¶rsel iÃ§in aÃ§Ä±klama..."></textarea>
  </div>
  <div class="image-upload">
    <label>2. GÃ¶rsel (Varsa)</label>
    <input type="file" name="resim2" accept="image/*">
    <textarea name="aciklama2" placeholder="Bu gÃ¶rsel iÃ§in aÃ§Ä±klama..."></textarea>
  </div>
  <div class="image-upload">
    <label>3. GÃ¶rsel (Varsa)</label>
    <input type="file" name="resim3" accept="image/*">
    <textarea name="aciklama3" placeholder="Bu gÃ¶rsel iÃ§in aÃ§Ä±klama..."></textarea>
  </div>

  <button type="submit">SipariÅŸi Kaydet</button>
</form>

<div id="popup">
  <strong id="orderNo"></strong>
  âœ… SipariÅŸiniz baÅŸarÄ±yla alÄ±nmÄ±ÅŸtÄ±r.<br>
  OnaylandÄ±ÄŸÄ± zaman size dÃ¶nÃ¼ÅŸ yapÄ±lacaktÄ±r.<br>
  <em>0â€“1 saat iÃ§erisinde dÃ¶nÃ¼ÅŸ olmazsa lÃ¼tfen bizimle iletiÅŸime geÃ§iniz.</em><br>
  <button id="close">Kapat</button>
</div>

<script>
  // Girdi doÄŸrulama
  document.getElementById('adsoyad').addEventListener('input', e => {
    e.target.value = e.target.value.replace(/[^A-Za-zÃ‡Ã§ÄÄŸÄ°Ä±Ã–Ã¶ÅÅŸÃœÃ¼\\s]/g, '');
  });
  document.getElementById('telefon').addEventListener('input', e => {
    e.target.value = e.target.value.replace(/\\D/g, '');
  });

  // Form gÃ¶nder
  const form = document.getElementById('form');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const fd = new FormData(form);
    const res = await fetch('/orders', { method: 'POST', body: fd });
    const data = await res.json();
    if (data.ok) {
      document.getElementById('orderNo').textContent = `SipariÅŸ NumaranÄ±z: ${data.orderNumber}`;
      document.getElementById('popup').style.display = 'block';
      form.reset();
    } else {
      alert('Bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.');
    }
  });

  document.getElementById('close').addEventListener('click', () => {
    document.getElementById('popup').style.display = 'none';
  });
</script>
</body>
</html>
